<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Integration Guide - Weblet</title>
  <meta name="description" content="How to integrate weblet into your app or platform. Programmatic API for validation, serving, and screenshots.">
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Bold color palette */
      --purple-400: #A855F7;
      --purple-500: #8B5CF6;
      --purple-600: #7C3AED;
      --coral-400: #FB923C;
      --coral-500: #F97316;
      --cyan-400: #22D3EE;
      --cyan-500: #06B6D4;
      --emerald-500: #10B981;

      /* Light theme */
      --bg: #FAFAFA;
      --bg-secondary: #FFFFFF;
      --bg-card: rgba(255, 255, 255, 0.7);
      --text: #1A1A2E;
      --text-secondary: #4A4A68;
      --text-muted: #6B7280;
      --border: rgba(139, 92, 246, 0.15);
      --border-strong: rgba(139, 92, 246, 0.3);

      /* Gradients */
      --gradient-primary: linear-gradient(135deg, var(--purple-500) 0%, var(--coral-500) 100%);
      --gradient-secondary: linear-gradient(135deg, var(--cyan-500) 0%, var(--purple-500) 100%);
      --gradient-text: linear-gradient(135deg, var(--purple-400) 0%, var(--coral-400) 50%, var(--cyan-400) 100%);

      /* Effects */
      --shadow-sm: 0 2px 8px rgba(139, 92, 246, 0.08);
      --shadow-md: 0 4px 20px rgba(139, 92, 246, 0.12);
      --shadow-lg: 0 8px 40px rgba(139, 92, 246, 0.16);
      --glass: rgba(255, 255, 255, 0.8);

      /* Layout */
      --max-width: 900px;
      --radius: 16px;
      --radius-lg: 24px;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0A0A0F;
        --bg-secondary: #12121A;
        --bg-card: rgba(26, 26, 46, 0.6);
        --text: #F8FAFC;
        --text-secondary: #CBD5E1;
        --text-muted: #94A3B8;
        --border: rgba(139, 92, 246, 0.2);
        --border-strong: rgba(139, 92, 246, 0.4);
        --glass: rgba(26, 26, 46, 0.7);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 8px 40px rgba(0, 0, 0, 0.5);
      }
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      -webkit-font-smoothing: antialiased;
    }

    /* Animated background */
    .bg-grid {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image:
        linear-gradient(rgba(139, 92, 246, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(139, 92, 246, 0.03) 1px, transparent 1px);
      background-size: 60px 60px;
      pointer-events: none;
      z-index: -1;
    }

    header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 1.25rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(20px);
    }

    .header-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: var(--text);
      font-weight: 700;
      font-size: 1.25rem;
    }

    .logo-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background: var(--gradient-primary);
      border-radius: 10px;
      font-size: 1.25rem;
    }

    nav {
      display: flex;
      gap: 0.5rem;
    }

    nav a {
      color: var(--text-muted);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    nav a:hover {
      color: var(--purple-500);
      background: rgba(139, 92, 246, 0.1);
    }

    @media (prefers-color-scheme: dark) {
      nav a:hover {
        color: var(--purple-400);
      }
    }

    main {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 4rem 2rem;
    }

    h1 {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
      font-weight: 800;
      margin-bottom: 1rem;
      letter-spacing: -0.03em;
    }

    h1 .gradient {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.35rem;
      color: var(--text-secondary);
      margin-bottom: 4rem;
    }

    h2 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-top: 4rem;
      margin-bottom: 1.25rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      letter-spacing: -0.02em;
    }

    h2:first-of-type {
      margin-top: 0;
      padding-top: 0;
      border-top: none;
    }

    h2 .gradient {
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      color: var(--text);
    }

    p {
      color: var(--text-secondary);
      margin-bottom: 1.25rem;
      font-size: 1.1rem;
    }

    code {
      font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
      font-size: 0.9em;
    }

    :not(pre) > code {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
      padding: 0.25em 0.6em;
      border-radius: 6px;
      color: var(--purple-500);
      font-weight: 500;
    }

    @media (prefers-color-scheme: dark) {
      :not(pre) > code {
        color: var(--purple-400);
      }
    }

    pre {
      background: linear-gradient(180deg, #1A1A2E 0%, #0F0F1A 100%);
      color: #E2E8F0;
      padding: 2rem;
      border-radius: var(--radius);
      overflow-x: auto;
      margin: 1.5rem 0;
      box-shadow: var(--shadow-lg);
      border: 1px solid rgba(139, 92, 246, 0.2);
      position: relative;
    }

    pre::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient-primary);
      border-radius: var(--radius) var(--radius) 0 0;
    }

    pre code {
      background: none;
      color: inherit;
      padding: 0;
      font-size: 0.95rem;
      line-height: 1.7;
    }

    .token-keyword { color: #C678DD; }
    .token-string { color: #98C379; }
    .token-comment { color: #5C6370; font-style: italic; }
    .token-function { color: #61AFEF; }
    .token-type { color: #E5C07B; }

    ul, ol {
      margin: 1.25rem 0 1.25rem 1.5rem;
      color: var(--text-secondary);
    }

    li {
      margin-bottom: 0.6rem;
      font-size: 1.05rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
    }

    th, td {
      text-align: left;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-weight: 600;
      color: var(--text);
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(6, 182, 212, 0.05) 100%);
    }

    td {
      color: var(--text-secondary);
      background: var(--glass);
    }

    tr:last-child td {
      border-bottom: none;
    }

    .note {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.08) 0%, rgba(6, 182, 212, 0.08) 100%);
      border-left: 4px solid var(--purple-500);
      padding: 1.25rem 1.5rem;
      border-radius: 0 var(--radius) var(--radius) 0;
      margin: 2rem 0;
    }

    .note p {
      margin: 0;
      font-size: 1rem;
    }

    .note strong {
      color: var(--purple-500);
    }

    @media (prefers-color-scheme: dark) {
      .note strong {
        color: var(--purple-400);
      }
    }

    footer {
      border-top: 1px solid var(--border);
      padding: 2.5rem 2rem;
      text-align: center;
      background: var(--bg-secondary);
    }

    footer a {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    footer a:hover {
      color: var(--purple-500);
    }

    @media (prefers-color-scheme: dark) {
      footer a:hover {
        color: var(--purple-400);
      }
    }

    .footer-copy {
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 2rem;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="bg-grid"></div>

  <header>
    <div class="header-inner">
      <a href="/" class="logo">
        <div class="logo-icon">ðŸ“¦</div>
        Weblet
      </a>
      <nav>
        <a href="https://github.com/jeffrschneider/weblet">GitHub</a>
        <a href="https://github.com/jeffrschneider/weblet/blob/master/specifications/Weblet-Specification-V1-0-0.md">Spec</a>
        <a href="https://github.com/jeffrschneider/weblet/tree/master/examples">Examples</a>
      </nav>
    </div>
  </header>

  <main>
    <h1><span class="gradient">Integration</span> Guide</h1>
    <p class="subtitle">How to integrate weblet into your app or platform.</p>

    <h2>Installation</h2>
    <p>Install weblet as a dependency:</p>
<pre><code>bun add weblet
<span class="token-comment"># or</span>
npm install weblet</code></pre>

    <h2>Quick <span class="gradient">Example</span></h2>
    <p>Here's a complete example of validating a weblet, serving it, and capturing screenshots:</p>
<pre><code><span class="token-keyword">import</span> {
  validateWeblet,
  getWebletInfo,
  serveWeblet,
  captureScreenshots,
} <span class="token-keyword">from</span> <span class="token-string">'weblet'</span>;

<span class="token-comment">// 1. Validate the weblet</span>
<span class="token-keyword">const</span> validation = <span class="token-keyword">await</span> <span class="token-function">validateWeblet</span>(<span class="token-string">'./my-app'</span>);
<span class="token-keyword">if</span> (!validation.valid) {
  console.error(<span class="token-string">'Invalid weblet:'</span>, validation.errors);
  process.exit(1);
}

<span class="token-comment">// 2. Get manifest info</span>
<span class="token-keyword">const</span> manifest = <span class="token-keyword">await</span> <span class="token-function">getWebletInfo</span>(<span class="token-string">'./my-app'</span>);
console.log(<span class="token-string">`Loaded: ${manifest.name}`</span>);

<span class="token-comment">// 3. Start the server</span>
<span class="token-keyword">const</span> server = <span class="token-keyword">await</span> <span class="token-function">serveWeblet</span>(<span class="token-string">'./my-app'</span>, { port: 3000 });
console.log(<span class="token-string">`Running at ${server.url}`</span>);

<span class="token-comment">// 4. Capture screenshots</span>
<span class="token-keyword">const</span> screenshots = <span class="token-keyword">await</span> <span class="token-function">captureScreenshots</span>(<span class="token-string">'./my-app'</span>, {
  output: <span class="token-string">'./previews'</span>,
  sizes: [<span class="token-string">'desktop'</span>, <span class="token-string">'mobile'</span>],
});
console.log(<span class="token-string">'Saved:'</span>, screenshots.files);

<span class="token-comment">// 5. Clean up</span>
<span class="token-keyword">await</span> server.<span class="token-function">stop</span>();</code></pre>

    <h2>API <span class="gradient">Reference</span></h2>

    <h3>validateWeblet(path)</h3>
    <p>Parse and validate a weblet's APP.md manifest.</p>
<pre><code><span class="token-keyword">const</span> result = <span class="token-keyword">await</span> <span class="token-function">validateWeblet</span>(<span class="token-string">'./my-app'</span>);

<span class="token-comment">// result.valid: boolean</span>
<span class="token-comment">// result.errors: string[]</span>
<span class="token-comment">// result.warnings: string[]</span>
<span class="token-comment">// result.manifest?: ParsedManifest (if valid)</span></code></pre>

    <h3>getWebletInfo(path)</h3>
    <p>Get the parsed manifest for a weblet. Throws if invalid.</p>
<pre><code><span class="token-keyword">const</span> manifest = <span class="token-keyword">await</span> <span class="token-function">getWebletInfo</span>(<span class="token-string">'./my-app'</span>);

<span class="token-comment">// manifest.name: string</span>
<span class="token-comment">// manifest.description?: string</span>
<span class="token-comment">// manifest.version?: string</span>
<span class="token-comment">// manifest.runtime: 'browser' | 'bun' | 'node' | 'deno'</span>
<span class="token-comment">// manifest.agent?: { ... }</span></code></pre>

    <h3>serveWeblet(path, options?)</h3>
    <p>Start a weblet server. Returns a handle to control it.</p>
<pre><code><span class="token-keyword">const</span> server = <span class="token-keyword">await</span> <span class="token-function">serveWeblet</span>(<span class="token-string">'./my-app'</span>, {
  port: 3000,        <span class="token-comment">// default: 3000</span>
  hostname: <span class="token-string">'localhost'</span>,
  open: <span class="token-keyword">false</span>,       <span class="token-comment">// open browser?</span>
});

<span class="token-comment">// server.url: string (e.g., 'http://localhost:3000')</span>
<span class="token-comment">// server.stop(): Promise&lt;void&gt;</span>
<span class="token-comment">// server.isRunning(): boolean</span></code></pre>

    <h3>captureScreenshots(path, options?)</h3>
    <p>Capture screenshots of a weblet at various viewport sizes.</p>
<pre><code><span class="token-keyword">const</span> result = <span class="token-keyword">await</span> <span class="token-function">captureScreenshots</span>(<span class="token-string">'./my-app'</span>, {
  output: <span class="token-string">'./screenshots'</span>,  <span class="token-comment">// default: ~/.weblet/screenshots/&lt;name&gt;/</span>
  sizes: [<span class="token-string">'desktop'</span>, <span class="token-string">'mobile'</span>],  <span class="token-comment">// viewport presets or WxH</span>
  animated: <span class="token-keyword">false</span>,           <span class="token-comment">// capture GIF?</span>
  duration: 5,               <span class="token-comment">// GIF duration in seconds</span>
  fps: 10,                   <span class="token-comment">// GIF frame rate</span>
  wait: 1000,                <span class="token-comment">// ms to wait after page load</span>
  route: <span class="token-string">'/'</span>,               <span class="token-comment">// route to capture</span>
});

<span class="token-comment">// result.files: string[] (paths to screenshots)</span>
<span class="token-comment">// result.outputDir: string</span>
<span class="token-comment">// result.appName: string</span></code></pre>

    <h2>Screenshot <span class="gradient">Options</span></h2>

    <h3>Viewport Presets</h3>
    <table>
      <thead>
        <tr>
          <th>Preset</th>
          <th>Dimensions</th>
        </tr>
      </thead>
      <tbody>
        <tr><td><code>desktop</code></td><td>1280 x 800</td></tr>
        <tr><td><code>mobile</code></td><td>375 x 667</td></tr>
        <tr><td><code>tablet</code></td><td>768 x 1024</td></tr>
        <tr><td><code>wide</code></td><td>1920 x 1080</td></tr>
      </tbody>
    </table>
    <p>You can also use custom dimensions: <code>'800x600'</code></p>

    <h3>Animated GIFs</h3>
    <p>To capture animated previews:</p>
<pre><code><span class="token-keyword">const</span> result = <span class="token-keyword">await</span> <span class="token-function">captureScreenshots</span>(<span class="token-string">'./my-app'</span>, {
  animated: <span class="token-keyword">true</span>,
  duration: 5,     <span class="token-comment">// 5 second GIF</span>
  fps: 10,         <span class="token-comment">// 10 frames per second</span>
});</code></pre>

    <div class="note">
      <p><strong>Note:</strong> Animated GIF generation requires ffmpeg to be installed on your system. Without ffmpeg, the feature will log a warning and skip GIF creation.</p>
    </div>

    <h2>Use <span class="gradient">Cases</span></h2>

    <h3>App Builder Platform</h3>
    <p>A platform that lets users describe apps, generates weblets, and shows previews:</p>
<pre><code><span class="token-comment">// User describes what they want...</span>
<span class="token-comment">// AI generates the weblet...</span>

<span class="token-comment">// Validate it worked</span>
<span class="token-keyword">const</span> { valid, errors } = <span class="token-keyword">await</span> <span class="token-function">validateWeblet</span>(outputPath);
<span class="token-keyword">if</span> (!valid) {
  <span class="token-keyword">return</span> { success: <span class="token-keyword">false</span>, errors };
}

<span class="token-comment">// Get preview images</span>
<span class="token-keyword">const</span> { files } = <span class="token-keyword">await</span> <span class="token-function">captureScreenshots</span>(outputPath, {
  output: <span class="token-string">`./previews/${userId}`</span>,
  sizes: [<span class="token-string">'desktop'</span>, <span class="token-string">'mobile'</span>],
});

<span class="token-keyword">return</span> {
  success: <span class="token-keyword">true</span>,
  previews: files,
};</code></pre>

    <h3>Weblet Marketplace</h3>
    <p>A registry that indexes and showcases weblets:</p>
<pre><code><span class="token-comment">// On weblet submission...</span>
<span class="token-keyword">const</span> manifest = <span class="token-keyword">await</span> <span class="token-function">getWebletInfo</span>(submittedPath);

<span class="token-comment">// Index it</span>
<span class="token-keyword">await</span> db.weblets.<span class="token-function">create</span>({
  name: manifest.name,
  description: manifest.description,
  version: manifest.version,
  runtime: manifest.runtime,
  triggers: manifest.agent?.triggers,
});

<span class="token-comment">// Generate listing images</span>
<span class="token-keyword">await</span> <span class="token-function">captureScreenshots</span>(submittedPath, {
  output: <span class="token-string">`./cdn/weblets/${manifest.name}`</span>,
  sizes: [<span class="token-string">'desktop'</span>],
  animated: <span class="token-keyword">true</span>,
  duration: 3,
});</code></pre>

    <h3>CI/CD Pipeline</h3>
    <p>Validate weblets in your build process:</p>
<pre><code><span class="token-comment">// In your test/build script</span>
<span class="token-keyword">import</span> { validateWeblet } <span class="token-keyword">from</span> <span class="token-string">'weblet'</span>;

<span class="token-keyword">const</span> result = <span class="token-keyword">await</span> <span class="token-function">validateWeblet</span>(<span class="token-string">'./dist'</span>);

<span class="token-keyword">if</span> (!result.valid) {
  console.error(<span class="token-string">'Weblet validation failed:'</span>);
  result.errors.<span class="token-function">forEach</span>(e => console.error(<span class="token-string">`  - ${e}`</span>));
  process.exit(1);
}

<span class="token-keyword">if</span> (result.warnings.length > 0) {
  console.warn(<span class="token-string">'Warnings:'</span>);
  result.warnings.<span class="token-function">forEach</span>(w => console.warn(<span class="token-string">`  - ${w}`</span>));
}

console.log(<span class="token-string">'Weblet is valid!'</span>);</code></pre>

    <h2>TypeScript <span class="gradient">Types</span></h2>
    <p>All types are exported for TypeScript users:</p>
<pre><code><span class="token-keyword">import</span> <span class="token-keyword">type</span> {
  <span class="token-type">ServeOptions</span>,
  <span class="token-type">ScreenshotOptions</span>,
  <span class="token-type">ScreenshotResult</span>,
  <span class="token-type">ValidationResult</span>,
  <span class="token-type">WebletServerHandle</span>,
  <span class="token-type">ParsedManifest</span>,
} <span class="token-keyword">from</span> <span class="token-string">'weblet'</span>;</code></pre>

  </main>

  <footer>
    <div class="footer-links">
      <a href="/">Home</a>
      <a href="https://github.com/jeffrschneider/weblet">GitHub</a>
      <a href="https://github.com/jeffrschneider/weblet/issues">Issues</a>
    </div>
    <p class="footer-copy">MIT License Â· Built for the AI agent ecosystem</p>
  </footer>
</body>
</html>
